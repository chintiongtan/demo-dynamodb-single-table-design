<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <link rel="stylesheet" href="dist/reset.css" />
    <link rel="stylesheet" href="dist/reveal.css" />
    <link rel="stylesheet" href="dist/theme/moon.css" />

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css" />

    <style>
      .emphasize {
        font-style: italic;
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section id="cover">
          <h3>DynamoDB for the Relational Mind</h3>
          <p>
            <small
              >üß† Bring your SQL brain ‚Äî but prepare to twist it a bit</small
            >
          </p>
        </section>

        <section id="about-me">
          <h2>About Me</h2>
          <ul>
            <li class="fragment">Chin Tiong / Alvin</li>
            <li class="fragment">ü¶Å Senior web engineer at MoneyLion</li>
            <li class="fragment">
              üíª Full stack developer for about 10 years now
            </li>
            <li class="fragment">
              üíº Have worked in both start-ups and established companies
            </li>
            <li class="fragment">üèéÔ∏è F1</li>
            <li class="fragment">üë®üèª Officially a dad now</li>
          </ul>

          <aside class="notes">
            <ul>
              <li>
                The name is Chin Tiong but you can also call me Alvin, which is
                great because it's shorter and doesn't require perfect Chinese
                pronunciation. Hokkien to be specific.
              </li>
              <li>
                Long enough to see trends going full circle
                <ul>
                  <li>
                    From native mobile to hybrid, and back to native because
                    "performance matters again"
                  </li>
                  <li>
                    From SQL to NoSQL, and occasionally back again with regrets
                  </li>
                </ul>
              </li>
              <li>
                Start-ups where "full stack" sometimes meant fixing the router
              </li>
              <li>
                Established companies, where I learned the value of process -
                and the fine art of scheduling a meeting to discuss the meeting
                we just had
              </li>
              <li>
                When I'm not coding, I'm watching F1 ‚Äî where milliseconds matter
                and no one complains about too many logs
              </li>
              <li>
                Became a dad to a 4-month old baby girl - so if I suddenly pause
                mid-talk, it's probably because my brain thinks it's 3AM and a
                diaper needs changing
              </li>
            </ul>
          </aside>
        </section>

        <section id="story-1">
          <section>
            <h2>Order placement microservice</h2>
            <ul>
              <li><code>users</code></li>
              <li><code>orders</code></li>
              <li><code>products</code></li>
            </ul>

            <aside class="notes">
              So, a while ago I was asked to work on a simple order placement
              microservice. You know ‚Äî the classic Users, Orders, Products
              setup. Easy stuff.
            </aside>
          </section>

          <section id="main-use-cases-1">
            <h2>4 main use cases</h2>

            <ol>
              <li class="fragment">Getting user profile and orders</li>
              <li class="fragment">Getting user orders</li>
              <li class="fragment">Getting user profile</li>
              <li class="fragment">Getting all orders</li>
            </ol>
          </section>
        </section>

        <section id="story-2">
          <div class="mermaid">
            <pre>
---
config:
  theme: 'dark'
---
              erDiagram
                users {
                  INT id PK
                  STRING name
                }
                orders {
                  STRING id PK
                  INT user_id FK
                  STRING product_id FK
                }
                products {
                  STRING id PK
                  STRING name
                  FLOAT price
                }
                users ||--o{ orders : places
                products ||--o{ orders : includes
            </pre>
          </div>

          <aside class="notes">
            <ul>
              <li>
                And naturally, as someone who came from a SQL background, I
                said: ‚ÄúPerfect. Let's throw in PostgreSQL. Three tables, a
                couple indexes, foreign keys, maybe some nice cascading deletes
                ‚Äî boom, let's ship it!‚Äù
              </li>
              <li>
                But then... product, or was it infra, someone ‚Äî someone said:
                ‚ÄúYeah... we're actually going to use DynamoDB.‚Äù
              </li>
            </ul>
          </aside>
        </section>

        <section
          id="story-3"
          data-background="https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExd2U4bm5iZmtqcnA0cmIzeXY5a2FzcDdycTM3YzM1eDF6eGNqc2t2NSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/XH9tzHRGQmLSFGP6E8/giphy.gif"
          data-transition="zoom-in fade-out"
        >
          <div
            style="background-color: rgba(255, 255, 255, 0.5); padding: 16px"
          >
            <h2 style="color: #000">Excuse me?</h2>
          </div>

          <aside class="notes">
            <ul>
              <li>‚ÄúOh. Why?‚Äù</li>
              <li>‚ÄúWell, because it scales, and it's cheaper.‚Äù</li>
              <li>Cheaper. üòê</li>
              <li>
                Well I guess part of cost saved will add up to my bonus right?
                Right?
              </li>
            </ul>
          </aside>
        </section>

        <section id="story-4">
          <section data-transition="zoom">
            <div class="mermaid">
              <pre>
---
config:
  theme: 'dark'
---
                erDiagram
                  users {
                    INT id PK
                    STRING name
                  }
                  orders {
                    STRING id PK
                    INT user_id FK
                    STRING product_id FK
                  }
                  products {
                    STRING id PK
                    STRING name
                    FLOAT price
                  }
                  users ||--o{ orders : places
                  products ||--o{ orders : includes
              </pre>
            </div>

            <aside class="notes">
              <ul>
                <li>
                  So I did what any adaptable, team-playing developer would
                  do...
                </li>
                <li>
                  I Googled ‚ÄúHow to create tables in DynamoDB,‚Äù copy-pasted some
                  YAML, and spun up three tables ‚Äî Users, Orders, and Products.
                </li>
              </ul>
            </aside>
          </section>

          <section data-transition="zoom">
            <div class="mermaid">
              <pre>
---
config:
  theme: 'dark'
---
                erDiagram
                  users {
                    INT id PK
                    STRING name
                  }
                  orders {
                    STRING id PK
                    INT user_id
                    STRING product_id
                  }
                  products {
                    STRING id PK
                    STRING name
                    FLOAT price
                  }
              </pre>
            </div>

            <aside class="notes">
              <ul>
                <li>Yes. Three. Separate. Tables.</li>
                <li>Because my SQL brain whispered: Normalize, my child.</li>
                <li>
                  I knew I couldn't do joins. But I thought: "Hey, that's fine.
                  I'll just simulate it in code. How bad can it be?"
                </li>
              </ul>
            </aside>
          </section>
        </section>

        <section id="rant-1">
          <section>
            <h2>1. Getting user profile and orders</h2>
          </section>

          <section>
            <h2>In SQL?</h2>
            <pre class="fragment">
              <code class="sql" data-trim data-line-numbers="|1|2|3|4">
                SELECT *
                FROM users
                LEFT JOIN orders on users.id = orders.user_id
                WHERE users.id = '123';
              </code>
            </pre>
          </section>

          <section>
            <h2>In DynamoDB?</h2>
            <ol>
              <li class="fragment">
                Query the
                <code>users</code>
                table
              </li>
              <li class="fragment">
                Query the
                <code>orders</code>
                table
              </li>
              <li class="fragment">
                Query the <code>products</code> table for each order
              </li>
            </ol>

            <aside class="notes">
              <ul>
                <li>‚ÄúOkay, first query the Users table."</li>
                <li>"Cool. Now Orders."</li>
                <li>
                  "Great. Wait, now for each order I need to go to the Products
                  table to get the product name?‚Äù
                </li>
                <li>
                  Suddenly I'm writing more code than a JOIN clause ever needed.
                  I felt like I had become my own query planner ‚Äî just
                  significantly dumber and way more tired.
                </li>
              </ul>
            </aside>
          </section>
        </section>

        <section id="rant-2">
          <section>
            <h2>Oh, and seeding data?</h2>
          </section>

          <section>
            <h2>In SQL?</h2>
            <pre class="fragment">
              <code class="sql" data-trim data-line-numbers>
                INSERT INTO users VALUES ('123', 'Bob');
              </code>
            </pre>
          </section>

          <section>
            <h2>In DynamoDB?&nbsp;<span class="fragment">ü§™</span></h2>
            <ul>
              <li class="fragment">60 lines of AWS SDK code</li>
              <li class="fragment">Passed a CLI param wrong</li>
              <li class="fragment">
                <code>us-west-1</code> instead of <code>us-east-1</code>
              </li>
              <li class="fragment">Considered switching career</li>
            </ul>

            <aside class="notes">
              <p>
                I wrote 60 lines of AWS SDK code, passed a CLI param wrong,
                accidentally created a table in us-west-1 instead of us-east-1,
                and considered switching careers.
              </p>
            </aside>
          </section>
        </section>

        <section
          id="rant-3"
          data-background="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExajV4MnhyczY2dnczZ2FwcXlvdnhrMmdwYmg3ZTFyend1d3V0cjhhbiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/rhUeALlJgHrlEDYSoq/giphy.gif"
        >
          <div
            class="fragment"
            style="
              background-color: rgba(255, 255, 255, 0.5);
              color: #000;
              padding: 16px;
            "
          >
            <ul>
              <li>"Why is everything an item?"</li>
              <li class="fragment">
                "Why does a QueryCommand need that many parameters?"
              </li>
              <li class="fragment">
                "Why am I denormalizing when normalization was the first thing I
                learned in CS101?"
              </li>
              <li class="fragment">‚ÄúIs this what Bezos wanted?‚Äù</li>
            </ul>
          </div>

          <aside class="notes">
            <ul>
              <li>
                At one point I caught myself building a function that made 5
                separate calls, all to simulate what SQL would give me for free
                with a join and an index.
              </li>
              <li>And I started questioning everything:</li>
            </ul>
          </aside>
        </section>

        <section id="single-table-design">
          <h2 class="fragment">Single Table Design</h2>

          <p class="fragment">
            It sounded insane at first...&nbsp;<span class="fragment"
              >until it didnt.</span
            >
          </p>

          <aside class="notes">
            <ul>
              <li>
                When I was about to consider becoming a product manager, I
                discovered this thing called Single Table Design
              </li>
              <li>And that's what today's talk is about</li>
            </ul>
          </aside>
        </section>

        <section id="what-is-dynamodb">
          <h2>What is DynamoDB?</h2>

          <ul>
            <li class="fragment">Managed NoSQL database by AWS</li>
            <li class="fragment">
              Designed for <span class="emphasize">ultra-fast</span>,
              <span class="emphasize">high-scale</span> and
              <span class="emphasize">low-latency</span> workloads
            </li>
            <li class="fragment">
              You get:
              <ul>
                <li class="fragment">‚úÖ Pay-per-request pricing</li>
                <li class="fragment">‚úÖ No infrastructure headaches</li>
                <li class="fragment">‚ùå No joins</li>
                <li class="fragment">‚ùå No schemas</li>
                <li class="fragment">‚ùå No comfort zone</li>
              </ul>
            </li>
          </ul>

          <aside class="notes">
            Before we dive deeper, let's briefly talk about DynamoDB
          </aside>
        </section>

        <section id="what-is-schemaless">
          <section>
            <h2>What is Schema-less?</h2>

            <ul>
              <li class="fragment">
                ‚ÄúOkay cool, where do I define my table columns?‚Äù
              </li>
              <li class="fragment">DynamoDB: ‚ÄúColumns? Lol.‚Äù üòé</li>
              <ul>
                <li class="fragment">YOLO your data structure</li>
              </ul>
            </ul>
          </section>

          <section>
            <pre>
            <code class="json" data-trim data-line-numbers>
              { "PK": "USER#123", "Name": "Bob", "Email": "bob@example.com" }
              { "PK": "ORDER#456", "UserId": "123", "ProductId": "789", "Timestamp": "2025-08-02T14:30:00Z" }
              { "PK": "PRODUCT#789", "Name": "Keyboard", "Price": 120 }
            </code>
          </pre>

            <ul>
              <li class="fragment">
                Has <span class="emphasize">no</span> column definitions
              </li>
              <li class="fragment">
                Each item can have
                <span class="emphasize">different</span> attributes
              </li>
              <li class="fragment">
                The only required fields are your
                <span class="emphasize">partition key</span> (<code>PK</code>)
                and maybe
                <span class="emphasize">sort key</span> (<code>SK</code>)
              </li>
            </ul>

            <aside class="notes">
              This is what we mean by schema-less ‚Äî the DB doesn't care what
              shape your data takes. It's your app's job to make sense of it.
            </aside>
          </section>
        </section>

        <section id="what-is-single-table-design">
          <h2>What is Single Table Design?</h2>

          <ul>
            <li class="fragment">
              <span class="emphasize">One</span> table to rule them all, one
              table to find them... üßô‚Äç‚ôÇÔ∏è
            </li>
            <li class="fragment">
              You store multiple entity types using a
              <span class="emphasize">composite key</span>
            </li>
            <li class="fragment">
              It's not chaos if it's
              <span class="emphasize">intentional</span> ‚Äî and it's fast
            </li>
          </ul>
        </section>

        <section id="dynamodb-data-structure">
          <section data-transition="zoom">
            <pre>
              <code class="json" data-trim data-line-numbers>
                { "PK": "USER#123", "SK": "METADATA", "EntityType": "USER", "UserId": "123", "Name": "Bob", "Email": "bob@example.com" }
                { "PK": "USER#123", "SK": "ORDER#456", "EntityType": "ORDER", "ProductId": "001", "Timestamp": "2025-08-02T14:30:00Z" }
                { "PK": "USER#123", "SK": "ORDER#789", "EntityType": "ORDER", "ProductId": "002", "Timestamp": "2025-09-02T14:30:00Z" }
                { "PK": "PRODUCT#001", "EntityType": "PRODUCT", "Name": "Mechanical Keyboard", "Price": 120 }
                { "PK": "PRODUCT#002", "EntityType": "PRODUCT", "Name": "Ergonomic Chair", "Price": 350 }
              </code>
            </pre>
          </section>

          <section data-transition="zoom">
            <div class="mermaid">
              <pre>
                graph TD
                  subgraph DynamoDB Single Table
                    U["`PK: USER#123
                      SK: METADATA
                      EntityType: USER
                      Name: Bob`"]
                    O1["`PK: USER#123
                      SK: ORDER#456
                      EntityType: ORDER
                      ProductId: 001`"]
                    O2["`PK: USER#123
                      SK: ORDER#789
                      EntityType: ORDER
                      ProductId: 002`"]
                    P1["`PK: PRODUCT#001
                      SK: METADATA
                      EntityType: PRODUCT
                      Name: 'Mechanical Keyboard'`"]
                    P2["`PK: PRODUCT#002
                      SK: METADATA
                      EntityType: PRODUCT
                      Name: 'Ergonomic Chair'`"]
                  end
                  U --> O1
                  U --> O2
                  O1 -. references .-> P1
                  O2 -. references .-> P2
              </pre>
            </div>
          </section>

          <section>
            <p>
              <span class="fragment">1 query</span>
              <span class="fragment">+ 1 partition</span>
              <span class="fragment">+ 0 JOINs</span>
              <span class="fragment">= ‚àû happiness</span>
            </p>
          </section>
        </section>

        <section id="main-use-cases-2">
          <h2>4 main use cases</h2>

          <ol>
            <li class="fragment">Getting user profile and orders</li>
            <li class="fragment">Getting user orders</li>
            <li class="fragment">Getting user profile</li>
            <li class="fragment">Getting all orders</li>
          </ol>
        </section>

        <section id="1-getting-user-profile-and-orders">
          <section>
            <h2>1. Getting user profile and orders</h2>
          </section>

          <section>
            <h2>In SQL?</h2>
            <pre class="fragment">
              <code class="sql" data-trim data-line-numbers>
                SELECT *
                FROM users
                LEFT JOIN orders on users.id = orders.user_id
                WHERE users.id = '123';
              </code>
            </pre>
          </section>

          <section>
            <h2>In DynamoDB?</h2>
            <pre class="fragment">
              <code class="javascript" data-trim data-line-numbers="|3,5">
                new QueryCommand({
                  TableName: 'TheOneAndOnlyTable',
                  KeyConditionExpression: 'PK = :pk',
                  ExpressionAttributeValues: {
                    ':pk': 'USER#123'
                  }
                })
              </code>
            </pre>
          </section>

          <section>
            <h2>What you get in return?</h2>
            <pre class="fragment">
              <code class="json" data-trim data-line-numbers="|3-5|11-13|21-23">
                [
                  {
                    "PK": "USER#123",
                    "SK": "METADATA",
                    "EntityType": "USER",
                    "UserId": "123",
                    "Name": "Bob",
                    "Email": "bob@example.com"
                  },
                  {
                    "PK": "USER#123",
                    "SK": "ORDER#456",
                    "EntityType": "ORDER",
                    "OrderId": "456",
                    "ProductId": "001",
                    "ProductName": "Mechanical Keyboard",
                    "ProductPrice": 120,
                    "Timestamp": "2025-08-01T10:00:00Z"
                  },
                  {
                    "PK": "USER#123",
                    "SK": "ORDER#789",
                    "EntityType": "ORDER",
                    "OrderId": "789",
                    "ProductId": "002",
                    "ProductName": "Ergonomic Chair",
                    "ProductPrice": 350,
                    "Timestamp": "2025-08-02T14:30:00Z"
                  }
                ]
              </code>
            </pre>
          </section>
        </section>

        <section id="2-getting-user-orders">
          <section>
            <h2>2. Getting user orders</h2>
          </section>

          <section>
            <h2>In SQL?</h2>
            <pre class="fragment">
              <code class="sql" data-trim data-line-numbers>
                SELECT *
                FROM orders
                WHERE user_id = 123;
              </code>
            </pre>
          </section>

          <section>
            <h2>In DynamoDB?</h2>
            <pre class="fragment">
              <code class="javascript" data-trim data-line-numbers="|3,5-6">
                new QueryCommand({
                  TableName: 'TheOneAndOnlyTable',
                  KeyConditionExpression: 'PK = :pk AND begins_with(SK, :prefix)',
                  ExpressionAttributeValues: {
                    ':pk': 'USER#123',
                    ':prefix': 'ORDER#'
                  }
                })
              </code>
            </pre>
          </section>

          <section>
            <h2>What you get in return?</h2>
            <pre class="fragment">
              <code class="json" data-trim data-line-numbers="|3-5|12-15">
                [
                  {
                    "PK": "USER#123",
                    "SK": "ORDER#456",
                    "EntityType": "ORDER",
                    "OrderId": "456",
                    "ProductId": "001",
                    "ProductName": "Mechanical Keyboard",
                    "ProductPrice": 120,
                    "Timestamp": "2025-08-01T10:00:00Z"
                  },
                  {
                    "PK": "USER#123",
                    "SK": "ORDER#789",
                    "EntityType": "ORDER",
                    "OrderId": "789",
                    "ProductId": "002",
                    "ProductName": "Ergonomic Chair",
                    "ProductPrice": 350,
                    "Timestamp": "2025-08-02T14:30:00Z"
                  }
                ]
              </code>
            </pre>
          </section>
        </section>

        <section id="3-getting-user-profile">
          <section>
            <h2>3. Getting user profile</h2>
          </section>

          <section>
            <h2>In SQL?</h2>
            <pre class="fragment">
              <code class="sql" data-trim data-line-numbers>
                SELECT *
                FROM users
                WHERE id = 123;
              </code>
            </pre>
          </section>

          <section>
            <h2>In DynamoDB?</h2>
            <pre class="fragment">
              <code class="javascript" data-trim data-line-numbers="|3,5-6">
                new QueryCommand({
                  TableName: 'TheOneAndOnlyTable',
                  KeyConditionExpression: 'PK = :pk AND SK = :sk',
                  ExpressionAttributeValues: {
                    ':pk': 'USER#123',
                    ':sk': 'METADATA'
                  }
                })
              </code>
            </pre>
          </section>

          <section>
            <h2>What you get in return?</h2>
            <pre class="fragment">
              <code class="json" data-trim data-line-numbers="|3-5">
                [
                  {
                    "PK": "USER#123",
                    "SK": "METADATA",
                    "EntityType": "USER",
                    "UserId": "123",
                    "Name": "Bob",
                    "Email": "bob@example.com"
                  },
                ]
              </code>
            </pre>
          </section>
        </section>

        <section id="4-getting-all-orders">
          <section>
            <h2>4. Getting all orders</h2>
          </section>

          <section>
            <h2>In SQL?</h2>
            <pre class="fragment">
              <code class="sql" data-trim data-line-numbers>
                SELECT *
                FROM orders;
              </code>
            </pre>
          </section>

          <section>
            <h2>In DynamoDB?</h2>
            <ul>
              <li class="fragment">Can only query by partition key</li>
              <li class="fragment">Global Secondary Index (GSI)</li>
              <ul>
                <li class="fragment">
                  Like alternate universes:
                  <span class="emphasize"
                    >same data, different access patterns</span
                  >
                </li>
                <li class="fragment">
                  Useful when you
                  <span class="emphasize">don't have the partition key</span>
                  handy
                </li>
              </ul>
            </ul>
          </section>

          <section>
            <h2>Create a GSI</h2>
            <pre>
              <code class="json" data-trim data-line-numbers="|2,4">
                {
                  "IndexName": "EntityTypeIndex",
                  "KeySchema": [
                    { "AttributeName": "EntityType", "KeyType": "HASH" }
                  ]
                }
              </code>
            </pre>
          </section>

          <section>
            <h2>Query using GSI</h2>
            <pre>
              <code class="javascript" data-trim data-line-numbers="|3-4,6">
                new QueryCommand({
                  TableName: 'TheOneAndOnlyTable',
                  IndexName: 'EntityTypeIndex',
                  KeyConditionExpression: 'EntityType = :entityType',
                  ExpressionAttributeValues: {
                    ':entityType': 'ORDER'
                  }
                })
              </code>
            </pre>
          </section>

          <section>
            <h2>What you get in return?</h2>
            <pre class="fragment">
              <code class="json" data-trim data-line-numbers="|3-5|13-15">
                [
                  {
                    "PK": "USER#123",
                    "SK": "ORDER#456",
                    "EntityType": "ORDER",
                    "OrderId": "456",
                    "ProductId": "001",
                    "ProductName": "Mechanical Keyboard",
                    "ProductPrice": 120,
                    "Timestamp": "2025-08-01T10:00:00Z"
                  },
                  {
                    "PK": "USER#123",
                    "SK": "ORDER#789",
                    "EntityType": "ORDER",
                    "OrderId": "789",
                    "ProductId": "002",
                    "ProductName": "Ergonomic Chair",
                    "ProductPrice": 350,
                    "Timestamp": "2025-08-02T14:30:00Z"
                  }
                ]
              </code>
            </pre>
          </section>
        </section>

        <section id="what-single-table-design-is-for">
          <section>
            <h2>
              Single Table Design is
              <span style="color: green">great</span> when ...
            </h2>
          </section>

          <section>
            <h2>1. ‚úÖ Your access patterns are known and stable</h2>
            <ul>
              <li class="fragment">
                <em
                  >You're not just throwing queries at the database hoping
                  something sticks</em
                >
              </li>
              <li class="fragment">
                You know <span class="emphasize">how</span> you'll access the
                data <span class="emphasize">before</span> designing the schema
              </li>
            </ul>
          </section>

          <section>
            <h2>
              2. ‚úÖ You want fast reads.
              <span class="fragment">Like, now.</span>
            </h2>
            <ul>
              <li class="fragment">
                <em>You want millisecond latency, not millisecond regrets</em>
              </li>
              <li class="fragment">
                1 partition = all related data
                <ul>
                  <li><span class="emphasize">No</span> JOINs</li>
                  <li><span class="emphasize">No</span> query planning</li>
                  <li>
                    <span class="emphasize">High</span> read throughput with
                    <span class="emphasize">low</span> latency (&lt; 10ms)
                  </li>
                </ul>
              </li>
            </ul>
          </section>

          <section>
            <h2>3. ‚úÖ You're building for scale, not style</h2>
            <ul>
              <li class="fragment">
                <em
                  >Your system might one day replace Google Search, so plan
                  ahead</em
                >
              </li>
              <li class="fragment">
                Scales <span class="emphasize">horizontally</span> without
                tuning or indexing overhead
              </li>
            </ul>
          </section>

          <section>
            <h2>4. ‚úÖ You want to spend less</h2>
            <ul>
              <li class="fragment">
                <em
                  >Your idle database won't run up the AWS bill just to look
                  busy</em
                >
              </li>
              <li class="fragment">
                Pay-per-request =
                <span class="emphasize">cost-efficient</span> at scale
              </li>
            </ul>
          </section>
        </section>

        <section id="what-single-table-design-isnt-for">
          <section>
            <h2>
              When Single Table Design is
              <span style="color: red">not</span> your best friend
            </h2>
          </section>

          <section>
            <h2>1. ‚ùå You don't know what you want - yet</h2>
            <ul>
              <li class="fragment">
                <em
                  >Your access patterns change more often than the fashion
                  trend</em
                >
              </li>
              <li class="fragment">
                DynamoDB isn't suitable for flexible, exploratory queries or
                reporting dashboards.
              </li>
            </ul>
          </section>

          <section>
            <h2>2. ‚ùå Your relationships are many-to-many or recursive</h2>
            <ul>
              <li class="fragment">
                <em>Your queries look like detective novels</em>
              </li>
              <li class="fragment">
                Single table design struggles with complex relationship
                traversal
              </li>
            </ul>
          </section>

          <section>
            <h2>3. ‚ùå You're building complex joins like it's a sport</h2>
            <ul>
              <li class="fragment">
                <em
                  >If your queries have JOINs nested deeper than your trauma,
                  stick with Postgres</em
                >
              </li>
              <li class="fragment">
                DynamoDB lacks native joins; cross-entity relationships must be
                modeled manually or denormalized
              </li>
            </ul>
          </section>

          <section>
            <h2>4. ‚ùå You love schema enforcement</h2>
            <ul>
              <li class="fragment">
                <em
                  >You want a schema that slaps your hand when you're wrong</em
                >
              </li>
              <li class="fragment">
                DynamoDB won't stop you from writing garbage
              </li>
              <li class="fragment">
                Instead, structure has to be enforced through app logic, and
                people make mistake
              </li>
            </ul>
          </section>
        </section>

        <section id="strategies-to-adopt-single-table-design">
          <section>
            <h2>Adopting Single Table Design (Without Crying)</h2>
          </section>

          <section>
            <h2>1. üß† Start with your access patterns</h2>
            <ul>
              <li class="fragment">
                <em>Don't design for tables, design for questions</em>
              </li>
              <li class="fragment">
                Begin with real user queries and design your keys and items
                around how you'll read them
              </li>
            </ul>
          </section>

          <section>
            <h2>2. üß† Design predictable composite keys</h2>
            <ul>
              <li class="fragment">
                <em
                  >Name your keys like they'll be debugged by your future,
                  sleep-deprived self</em
                >
              </li>
              <li class="fragment">
                Use clear, consistent patterns like
                <code>PK: USER#123, SK: ORDER#456</code>
                for maintainability
              </li>
            </ul>
          </section>

          <section>
            <h2>3. üß† Co-locate related data</h2>
            <ul>
              <li class="fragment">
                <em
                  >Group your data like how you avoid paying that shipping
                  fee</em
                >
              </li>
              <li class="fragment">
                Place all logically related items under the same PK to enable
                efficient single-query reads
              </li>
            </ul>
          </section>

          <section>
            <h2>4. üß† Embrace denormalization</h2>
            <ul>
              <li class="fragment">
                <em
                  >Store the product name inside the order. Future-you will
                  thank you when rendering UI.</em
                >
              </li>
              <li class="fragment">
                Duplicating frequently accessed data improves performance and
                reduces query complexity
              </li>
            </ul>
          </section>

          <section>
            <h2>5. üß† Use GSI sparingly</h2>
            <ul>
              <li class="fragment">
                <em>GSIs are like espresso shots: use only when necessary.</em>
              </li>
              <li class="fragment">
                Each GSI adds cost and complexity ‚Äî only create indexes that
                support critical access patterns
              </li>
            </ul>
          </section>

          <section>
            <h2>6. üß† Validate structure in code</h2>
            <ul>
              <li class="fragment">
                <em>Just because DynamoDB lets you YOLO, you shouldn't</em>
              </li>
              <li class="fragment">
                Use schema validators like TypeScript types or Zod to enforce
                consistency
              </li>
            </ul>
          </section>
        </section>

        <section><h2>Q&A</h2></section>
      </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/zoom/zoom.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/search/search.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js-mermaid-plugin@11.6.0/plugin/mermaid/mermaid.js"></script>
    <script>
      Reveal.initialize({
        center: true,
        controls: true,
        hash: true,
        plugins: [
          RevealHighlight,
          RevealMarkdown,
          RevealMermaid,
          RevealNotes,
          RevealSearch,
          RevealZoom,
        ],
        progress: true,
      });
    </script>
  </body>
</html>
